<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="./d3-appmap.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.js" integrity="sha512-F63QPFxQ27mn9COmkZhSirC1pBNeVJ7MJJs4wtK6XfiAaH3WM1SfX6Sv2Pme/499+hafP0dALVZOADw4W2r6eQ==" crossorigin="anonymous"></script>
    <!-- Don't use this in production: -->
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/javascript" src="./browser-scss.min.js"></script>
  <script type="text/javascript" defer src="./d3-appmap.js" ></script>
  </script>
  <title>appmap-d3</title>
</head>

<body>
  <style type="text/scss" lang="scss">
    #reactt-root{
      background-color: lightgrey;
      margin-bottom: 20px;
      .form-container{
        padding: 0;
        max-width: 100%;
      }
      .mode-buttons{
        display:flex;
        flex-direction:row;
        & > button{
          margin:5px;
        }
        border: 1px solid black;
      }
      .form{
        padding: 5px;
        border: 1px solid black;
        width: 100%;
        display: flex;
        flex-direction: column;
        label{
          width:fit-content;
        }
        input{
          width:200px;
        }
        select{
          width: 400px;
        }

        button{
          width: 200px;
          margin:5px;
          align-self: center;
        }
      }
    }
    
  </style>
  <div class="container">
    <div class="header clearfix">
      <nav>
        <h3 class="text-muted">appmap-d3</h3>
      </nav>
    </div>
    <span class="text-muted" >Double click to expand node</span>
    <br/>
    <span class="text-muted" >Right click(context menu) on node to edit</span>
    <div id="react-root"></div>
    <div id="component-diagram">
    </div>
    <div id="flow-view">
    </div>
    <div id="timeline">
    </div>
  </div>
</body>


<script type="text/babel" data-presets="env,react">
  const classReducer = (state,action)=>{
    switch (action.type) {
      case 'name':
        return {...state, name:action.value, error: null}
      case 'parent':
        return {...state, parent:action.value, error: null}
      case 'callsTo':
        return {...state, callsTo:action.value, error: null}
      case 'calledBy':
        return {...state, calledBy:action.value, error: null}
      case 'error':
        return {...state, error: action.value}
      default:
        return state;
    }
  }

  const ClassForm = ({id})=>{
    const isCreating = !id
    const data = window.componentDiagramModel
    const classes = Object.keys(data.class_package)
    const [formState,dispatch] = React.useReducer(classReducer,
    {
      name:id ?? 'New Class',
      parent:data.class_package[id] ?? data.packages[0],
      callsTo:data.class_calls[id] ?? [],
      calledBy: data.class_callers[id] ??[]
    }) 
    const handleCreate= ()=>{
        const new_class = formState.name;
        const old_class = id
        const old_package = data.class_package[old_class]
        if(!classes.includes(new_class) || new_class === old_class ){
          if(isCreating){
          // set parent connections 
          data.class_package[new_class] = formState.parent
          data.package_classes[formState.parent].push(new_class)
          // placeholder location
          data.class_locations[new_class] = ""
          // set forth and back connections
          data.class_calls[new_class] = new Set(formState.callsTo)
          data.class_callers[new_class] = new Set(formState.calledBy)
          formState.calledBy.forEach(caller=>{
            // add new class to class_calls of caller
            data.class_calls[caller].push(new_class)
            // get parent package of caller
            const caller_parent = data.class_package[caller]
            data.package_calls[caller_parent].push(formState.parent)
          })
          } else {
            //rename formState

            //package_clasess
            data.package_classes[old_package].splice(data.package_classes[old_package].indexOf(old_class),1)
            data.package_classes[formState.parent].push(new_class)
            // class_package
            delete data.class_package[old_class]
            data.class_package[new_class]=formState.parent
            // rename class_calls and class_callers entries
            Object.values(data.class_calls).forEach(arr =>arr[arr.indexOf(old_class)]=new_class)
            Object.values(data.class_callers).forEach(arr =>arr[arr.indexOf(old_class)]=new_class)
            // rename class calls key
            const old_class_calls = data.class_calls[old_class] ?? [] // if class calls itself, this already has new class name
            data.class_calls[old_class] = null
            delete data.class_calls[old_class]
            // goto every called class and edit their class_callers
            old_class_calls.forEach(c=>{
              data.class_callers[c]?.splice(data.class_callers[c].indexOf(new_class),1);
            })
            formState.callsTo.forEach( c=>{
              data.class_callers[c]?.push(new_class);
            }) 
            // rename class callers key
            const old_class_callers = data.class_callers[old_class] 
            data.class_calls[old_class] = null
            delete data.class_calls[old_class]
            // new called classes
            data.class_calls[new_class] = [...formState.callsTo]
            data.class_callers[new_class] = [...formState.calledBy]
            // goto every class caller and edit their class_calls
            old_class_callers.forEach(c=>{
              data.class_calls[c]?.splice(data.class_calls[c].indexOf(new_class),1);
            })
            formState.calledBy.forEach( c=>{
              data.class_calls[c]?.push(new_class);
            }) 

          }

          window.diagram.render(componentDiagramModel)
        }else{
          dispatch({type:'error',value:"There is already a class with that name"})
        }

    }
    return (
      <form>
        <h2>{isCreating ? "Create" : "Edit"} class</h2>
        {formState.error && <span className="error">{formState.error}</span>}
        <div className="form-group"> 
          <label>Class name</label>
          <input  className="form-control" type="text" value={formState.name} onChange={(e)=>dispatch({type:'name',value:e.target.value})}/>
        </div>
        <div className="form-group"> 
        <label>Parent package</label>
        <select className="form-control" onChange={e=>{
          dispatch({type:'parent',value:e.target.value})
        }}>
          {data.packages.map(p=> <option key={p} value={p}>{p}</option>)}
        </select>
        </div>
        <div className="form-group"> 
        <label>Calls to</label>
        <select className="form-control"  multiple onChange={e=>{
          dispatch({type:'callsTo',value:Array.from(e.target.selectedOptions).map(option=>option.value)})
        }} value={formState.callsTo}>
          {classes.map(p=> <option key={p} value={p}>{p}</option>)}
        </select>
        </div>
        <div className="form-group"> 
        <label>Called by</label>
        <select className="form-control" multiple onChange={e=>{
          dispatch({type:'calledBy',value:Array.from(e.target.selectedOptions).map(option=>option.value)})
        }} 
        value={formState.calledBy}>
          {classes.map(p=> <option key={p} value={p} >{p}</option>)}
        </select>
        </div>
        <button className="btn" onClick={handleCreate}>Save</button>
      </form>) 
  }

  const packageReducer = (state,action)=>{
    switch (action.type) {
      case 'name':
        return {...state, name:action.value, error: null}
      case 'error':
        return {...state, error: action.value}
      default:
        break;
    }
  }

  const PackageForm = ({id})=>{
    const isCreating = !id
    const data = window.componentDiagramModel
    const [formState,dispatch] = React.useReducer(packageReducer,{name:id ?? "New package",clasess:[]}) 
    const handleCreate= ()=>{
        const new_package = formState.name;
        const old_package = id
        if(!data.packages.includes(new_package)){
          if(isCreating){
            data.packages.push(new_package);
            data.package_classes[new_package]=new Set();
            data.componentDiagramModel.package_calls[new_package]=new Set();
          }
          else if(new_package!==old_package){
            // edit packges
            data.packages[data.packages.indexOf(old_package)]=new_package
            // edit class_package
            for (const key in data.class_package) {
              if (data.class_package.hasOwnProperty(key)) {
                if(data.class_package[key] === old_package){
                  data.class_package[key] = new_package
                }
              }
            }
            // edit package_calls
            Object.values(data.package_calls).map(arr =>arr[arr.indexOf(old_package)]=new_package)
            data.package_calls[new_package]=data.package_calls[old_package]
            data.package_calls[old_package] = null
            delete data.package_calls[old_package]
            // edit package_classes
            data.package_classes[new_package]=data.package_classes[old_package]
            data.package_classes[old_package] = null
            // edit controller_packages
            data.controller_packages[data.controller_packages.indexOf(old_package)]=new_package
          }
          window.diagram.render(data);
      }else{
        dispatch({type:'error',value:"There is already a package with that name"})
      }

    }
    return (
      <form>
        <h2>{isCreating ? "Create" : 'Edit'} Package</h2>
        {formState.error && <span className="error">{formState.error}</span>}
        <div className="form-group"> 
        <label>Package name</label>
        <input className="form-control" type="text" value={formState.name} onChange={(e)=>dispatch({type:'name',value:e.target.value})}/>
        </div > 
        <button className="btn" onClick={handleCreate}>Save</button>
      </form>)
  }

  const Root = ()=>{
    const [diagramRender,handleRerender]=React.useState({});
     React.useEffect(()=>{
      const cb =()=>handleRerender({})
      window.diagram.on('postrender',cb);

    },[])
    const [mode,setMode] = React.useState({type:"class",id:null});

    const handleClick = React.useCallback((target)=>{
      const e = d3.event
      if(e.button ===2){
        e.preventDefault()
        for (let index = 0; index < e.path.length; index++) {
          const element = e.path[index];
          if(element.classList.contains('package')){
            setMode({type:"package",id:element.id})
            break;
          }
          else if(element.classList.contains('class')){
            setMode({type:"class",id:element.id})
            break;
          }
        }
        window.scrollTo(0,0);
      }
    },[])
    React.useEffect(()=>{
      window.diagram.graphGroup.on('contextmenu',handleClick) 
    },[diagramRender])
    return (<div className="container">
        <nav className="row">
          <div className="col-md-2">
            <button className="btn" onClick={()=>setMode({type:"package",id:null})}>
              Create Package
            </button>
          </div>
          <div className="col-md-2">
          <button className="btn" onClick={()=>setMode({type:"class",id:null})}>
            Create Class  
          </button>
          </div>
        </nav>
          {mode.type === "package" && <PackageForm key={mode.id} id={mode.id} />}
          {mode.type === "class" && <ClassForm key={mode.id} id={mode.id}/>}
      </div>)
  }


  ReactDOM.render(
    <Root/>,
    document.getElementById('react-root')
  );

</script>

<script type="text/javascript">
  function aggregateEvents(events, classMap) {
    const eventInfo = new Appmap.EventInfo(classMap);
    const callTree = Appmap.buildCallTree(events);

    callTree.forEach((e) => {
      e.displayName = eventInfo.getName(e.input);
      e.labels = eventInfo.getLabels(e.input);
    });

    return callTree;
  }

  function onLoad() {
   // {
      
      var diagram = new Appmap.ComponentDiagram('#component-diagram');
      diagram.render(window.componentDiagramModel);
      window.diagram = diagram;
    //}
    // {
    //   const callTree = aggregateEvents(window.scenarioData.data.events,
    //     window.scenarioData.data.classMap);

    //   var diagram = new Appmap.Timeline('#timeline');
    //   diagram.render(callTree);
    // }
  }

  document.addEventListener('DOMContentLoaded', onLoad, false);
</script>

<!--
  https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script
  Better written as:
  <script id="data" type="application/json">{"userId":1234, ...
-->
<script>
  window.scenarioData = { "id": 559334, "created_at": "2020-09-18T19:17:44.745Z", "updated_at": "2020-09-18T21:21:19.907Z", "uuid": "4c2ee604-3687-4bac-a92c-7c5d2f8df32b", "data": { "events": [{ "id": 1, "path": "app/models/user.rb", "event": "call", "lineno": 119, "static": false, "receiver": { "class": "User", "value": "#\u003cUser:0x00005635054665c8\u003e", "object_id": 47392860877540 }, "method_id": "set_defaults", "thread_id": 47392722082140, "parameters": [], "defined_class": "User" }, { "id": 2, "event": "return", "elapsed": 2.9253e-05, "parent_id": 1, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 3, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "0", "object_id": 1 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  \u001b[1m\u001b[35m (0.2ms)\u001b[0m  \u001b[1m\u001b[35mSAVEPOINT active_record_1\u001b[0m", "object_id": 47392860891960 }], "defined_class": "Logger" }, { "id": 4, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  \u001b[1m\u001b[35m (0.2ms)\u001b[0m  \u001b[1m\u001b[35mSAVEPOINT active_record_1\u001b[0m\n", "object_id": 47392860890220 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 5, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  \u001b[1m\u001b[35m (0.2ms)\u001b[0m  \u001b[1m\u001b[35mSAVEPOINT active_record_1\u001b[0m\n", "object_id": 47392860890220 }], "defined_class": "IO" }, { "id": 6, "event": "return", "elapsed": 3.3946e-05, "parent_id": 5, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "64", "object_id": 129 } }, { "id": 7, "event": "return", "elapsed": 0.000120625, "parent_id": 4, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "64", "object_id": 129 } }, { "id": 8, "event": "return", "elapsed": 0.00026804, "parent_id": 3, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 9, "event": "call", "sql_query": { "sql": "SAVEPOINT active_record_1", "normalized": true, "database_type": "postgres", "normalized_sql": "SAVEPOINT active_record_1", "server_version": 100013 }, "thread_id": 47392722082140 }, { "id": 10, "event": "return", "elapsed": 0.000646419, "parent_id": 9, "thread_id": 47392722082140 }, { "id": 11, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "0", "object_id": 1 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  \u001b[1m\u001b[36mUser Exists? (0.4ms)\u001b[0m  \u001b[1m\u001b[34mSELECT 1 AS one FROM \"users\" WHERE \"users\".\"email\" = $", "object_id": 47392861290740 }], "defined_class": "Logger" }, { "id": 12, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  \u001b[1m\u001b[36mUser Exists? (0.4ms)\u001b[0m  \u001b[1m\u001b[34mSELECT 1 AS one FROM \"users\" WHERE \"users\".\"email\" = $", "object_id": 47392861305320 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 13, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  \u001b[1m\u001b[36mUser Exists? (0.4ms)\u001b[0m  \u001b[1m\u001b[34mSELECT 1 AS one FROM \"users\" WHERE \"users\".\"email\" = $", "object_id": 47392861305320 }], "defined_class": "IO" }, { "id": 14, "event": "return", "elapsed": 3.2324e-05, "parent_id": 13, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "168", "object_id": 337 } }, { "id": 15, "event": "return", "elapsed": 0.000114244, "parent_id": 12, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "168", "object_id": 337 } }, { "id": 16, "event": "return", "elapsed": 0.000212148, "parent_id": 11, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 17, "event": "call", "sql_query": { "sql": "SELECT 1 AS one FROM \"users\" WHERE \"users\".\"email\" = $1 LIMIT $2", "normalized": true, "database_type": "postgres", "normalized_sql": "SELECT $3 AS one FROM \"users\" WHERE \"users\".\"email\" = $1 LIMIT $2", "server_version": 100013 }, "thread_id": 47392722082140 }, { "id": 18, "event": "return", "elapsed": 0.00076625, "parent_id": 17, "thread_id": 47392722082140 }, { "id": 19, "path": "app/models/user.rb", "event": "call", "lineno": 110, "static": false, "receiver": { "class": "User", "value": "#\u003cUser:0x00005635054665c8\u003e", "object_id": 47392860877540 }, "method_id": "oauth_enabled?", "thread_id": 47392722082140, "parameters": [], "defined_class": "User" }, { "id": 20, "event": "return", "elapsed": 2.7085e-05, "parent_id": 19, "thread_id": 47392722082140 }, { "id": 21, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "0", "object_id": 1 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  \u001b[1m\u001b[36mUser Load (0.3ms)\u001b[0m  \u001b[1m\u001b[34mSELECT \"users\".* FROM \"users\" WHERE \"users\".\"uid\" = $1 OR", "object_id": 47392861666340 }], "defined_class": "Logger" }, { "id": 22, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  \u001b[1m\u001b[36mUser Load (0.3ms)\u001b[0m  \u001b[1m\u001b[34mSELECT \"users\".* FROM \"users\" WHERE \"users\".\"uid\" = $1 OR", "object_id": 47392861664580 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 23, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  \u001b[1m\u001b[36mUser Load (0.3ms)\u001b[0m  \u001b[1m\u001b[34mSELECT \"users\".* FROM \"users\" WHERE \"users\".\"uid\" = $1 OR", "object_id": 47392861664580 }], "defined_class": "IO" }, { "id": 24, "event": "return", "elapsed": 3.1369e-05, "parent_id": 23, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "186", "object_id": 373 } }, { "id": 25, "event": "return", "elapsed": 0.00011386, "parent_id": 22, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "186", "object_id": 373 } }, { "id": 26, "event": "return", "elapsed": 0.000214656, "parent_id": 21, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 27, "event": "call", "sql_query": { "sql": "SELECT \"users\".* FROM \"users\" WHERE \"users\".\"uid\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2", "normalized": true, "database_type": "postgres", "normalized_sql": "SELECT \"users\".* FROM \"users\" WHERE \"users\".\"uid\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2", "server_version": 100013 }, "thread_id": 47392722082140 }, { "id": 28, "event": "return", "elapsed": 0.000679732, "parent_id": 27, "thread_id": 47392722082140 }, { "id": 29, "path": "app/models/user.rb", "event": "call", "lineno": 114, "static": false, "receiver": { "class": "User", "value": "#\u003cUser:0x00005635054665c8\u003e", "object_id": 47392860877540 }, "method_id": "remove_leading_trailing_whitespace", "thread_id": 47392722082140, "parameters": [], "defined_class": "User" }, { "id": 30, "event": "return", "elapsed": 2.5546e-05, "parent_id": 29, "thread_id": 47392722082140 }, { "id": 31, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "0", "object_id": 1 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  \u001b[1m\u001b[36mUser Create (0.5ms)\u001b[0m  \u001b[1m\u001b[32mINSERT INTO \"users\" (\"email\", \"encrypted_password\", \"cr", "object_id": 47392862065020 }], "defined_class": "Logger" }, { "id": 32, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  \u001b[1m\u001b[36mUser Create (0.5ms)\u001b[0m  \u001b[1m\u001b[32mINSERT INTO \"users\" (\"email\", \"encrypted_password\", \"cr", "object_id": 47392862063260 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 33, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  \u001b[1m\u001b[36mUser Create (0.5ms)\u001b[0m  \u001b[1m\u001b[32mINSERT INTO \"users\" (\"email\", \"encrypted_password\", \"cr", "object_id": 47392862063260 }], "defined_class": "IO" }, { "id": 34, "event": "return", "elapsed": 3.1573e-05, "parent_id": 33, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "462", "object_id": 925 } }, { "id": 35, "event": "return", "elapsed": 0.000122103, "parent_id": 32, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "462", "object_id": 925 } }, { "id": 36, "event": "return", "elapsed": 0.000219409, "parent_id": 31, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 37, "event": "call", "sql_query": { "sql": "INSERT INTO \"users\" (\"email\", \"encrypted_password\", \"created_at\", \"updated_at\", \"name\", \"uid\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"", "normalized": true, "database_type": "postgres", "normalized_sql": "INSERT INTO \"users\" (\"email\", \"encrypted_password\", \"created_at\", \"updated_at\", \"name\", \"uid\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"", "server_version": 100013 }, "thread_id": 47392722082140 }, { "id": 38, "event": "return", "elapsed": 0.000859127, "parent_id": 37, "thread_id": 47392722082140 }, { "id": 39, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "0", "object_id": 1 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  \u001b[1m\u001b[36mPasswordHistory Exists? (0.4ms)\u001b[0m  \u001b[1m\u001b[34mSELECT 1 AS one FROM \"password_histories\" W", "object_id": 47392862415580 }], "defined_class": "Logger" }, { "id": 40, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  \u001b[1m\u001b[36mPasswordHistory Exists? (0.4ms)\u001b[0m  \u001b[1m\u001b[34mSELECT 1 AS one FROM \"password_histories\" W", "object_id": 47392862413520 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 41, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  \u001b[1m\u001b[36mPasswordHistory Exists? (0.4ms)\u001b[0m  \u001b[1m\u001b[34mSELECT 1 AS one FROM \"password_histories\" W", "object_id": 47392862413520 }], "defined_class": "IO" }, { "id": 42, "event": "return", "elapsed": 3.6707e-05, "parent_id": 41, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "326", "object_id": 653 } }, { "id": 43, "event": "return", "elapsed": 0.000116376, "parent_id": 40, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "326", "object_id": 653 } }, { "id": 44, "event": "return", "elapsed": 0.000217482, "parent_id": 39, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 45, "event": "call", "sql_query": { "sql": "SELECT 1 AS one FROM \"password_histories\" WHERE \"password_histories\".\"encrypted_password\" = $1 AND \"password_histories\".\"user_id\" = $2 LIMIT $3", "normalized": true, "database_type": "postgres", "normalized_sql": "SELECT $4 AS one FROM \"password_histories\" WHERE \"password_histories\".\"encrypted_password\" = $1 AND \"password_histories\".\"user_id\" = $2 LIMIT $3", "server_version": 100013 }, "thread_id": 47392722082140 }, { "id": 46, "event": "return", "elapsed": 0.00078293, "parent_id": 45, "thread_id": 47392722082140 }, { "id": 47, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "0", "object_id": 1 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  \u001b[1m\u001b[36mPasswordHistory Create (1.6ms)\u001b[0m  \u001b[1m\u001b[32mINSERT INTO \"password_histories\" (\"user_id\",", "object_id": 47392757512920 }], "defined_class": "Logger" }, { "id": 48, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  \u001b[1m\u001b[36mPasswordHistory Create (1.6ms)\u001b[0m  \u001b[1m\u001b[32mINSERT INTO \"password_histories\" (\"user_id\",", "object_id": 47392758143480 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 49, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  \u001b[1m\u001b[36mPasswordHistory Create (1.6ms)\u001b[0m  \u001b[1m\u001b[32mINSERT INTO \"password_histories\" (\"user_id\",", "object_id": 47392758143480 }], "defined_class": "IO" }, { "id": 50, "event": "return", "elapsed": 4.7759e-05, "parent_id": 49, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "329", "object_id": 659 } }, { "id": 51, "event": "return", "elapsed": 0.000152997, "parent_id": 48, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "329", "object_id": 659 } }, { "id": 52, "event": "return", "elapsed": 0.000328046, "parent_id": 47, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 53, "event": "call", "sql_query": { "sql": "INSERT INTO \"password_histories\" (\"user_id\", \"encrypted_password\", \"created_at\") VALUES ($1, $2, $3) RETURNING \"id\"", "normalized": true, "database_type": "postgres", "normalized_sql": "INSERT INTO \"password_histories\" (\"user_id\", \"encrypted_password\", \"created_at\") VALUES ($1, $2, $3) RETURNING \"id\"", "server_version": 100013 }, "thread_id": 47392722082140 }, { "id": 54, "event": "return", "elapsed": 0.002390963, "parent_id": 53, "thread_id": 47392722082140 }, { "id": 55, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "0", "object_id": 1 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  \u001b[1m\u001b[35m (0.5ms)\u001b[0m  \u001b[1m\u001b[34mSELECT COUNT(*) FROM \"password_histories\" WHERE \"password_historie", "object_id": 47392815204160 }], "defined_class": "Logger" }, { "id": 56, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  \u001b[1m\u001b[35m (0.5ms)\u001b[0m  \u001b[1m\u001b[34mSELECT COUNT(*) FROM \"password_histories\" WHERE \"password_historie", "object_id": 47392815257220 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 57, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  \u001b[1m\u001b[35m (0.5ms)\u001b[0m  \u001b[1m\u001b[34mSELECT COUNT(*) FROM \"password_histories\" WHERE \"password_historie", "object_id": 47392815257220 }], "defined_class": "IO" }, { "id": 58, "event": "return", "elapsed": 4.2152e-05, "parent_id": 57, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "141", "object_id": 283 } }, { "id": 59, "event": "return", "elapsed": 0.000136165, "parent_id": 56, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "141", "object_id": 283 } }, { "id": 60, "event": "return", "elapsed": 0.000259245, "parent_id": 55, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 61, "event": "call", "sql_query": { "sql": "SELECT COUNT(*) FROM \"password_histories\" WHERE \"password_histories\".\"user_id\" = $1", "normalized": true, "database_type": "postgres", "normalized_sql": "SELECT COUNT(*) FROM \"password_histories\" WHERE \"password_histories\".\"user_id\" = $1", "server_version": 100013 }, "thread_id": 47392722082140 }, { "id": 62, "event": "return", "elapsed": 0.001075757, "parent_id": 61, "thread_id": 47392722082140 }, { "id": 63, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "0", "object_id": 1 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  \u001b[1m\u001b[35m (0.3ms)\u001b[0m  \u001b[1m\u001b[35mRELEASE SAVEPOINT active_record_1\u001b[0m", "object_id": 47392820156760 }], "defined_class": "Logger" }, { "id": 64, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  \u001b[1m\u001b[35m (0.3ms)\u001b[0m  \u001b[1m\u001b[35mRELEASE SAVEPOINT active_record_1\u001b[0m\n", "object_id": 47392820176740 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 65, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  \u001b[1m\u001b[35m (0.3ms)\u001b[0m  \u001b[1m\u001b[35mRELEASE SAVEPOINT active_record_1\u001b[0m\n", "object_id": 47392820176740 }], "defined_class": "IO" }, { "id": 66, "event": "return", "elapsed": 4.0298e-05, "parent_id": 65, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "72", "object_id": 145 } }, { "id": 67, "event": "return", "elapsed": 0.000129103, "parent_id": 64, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "72", "object_id": 145 } }, { "id": 68, "event": "return", "elapsed": 0.00024371, "parent_id": 63, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 69, "event": "call", "sql_query": { "sql": "RELEASE SAVEPOINT active_record_1", "normalized": true, "database_type": "postgres", "normalized_sql": "RELEASE SAVEPOINT active_record_1", "server_version": 100013 }, "thread_id": 47392722082140 }, { "id": 70, "event": "return", "elapsed": 0.000785894, "parent_id": 69, "thread_id": 47392722082140 }, { "id": 71, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "1", "object_id": 3 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "Processing by AlliesController#remove as HTML", "object_id": 47392825795080 }], "defined_class": "Logger" }, { "id": 72, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "Processing by AlliesController#remove as HTML\n", "object_id": 47392825855640 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 73, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "Processing by AlliesController#remove as HTML\n", "object_id": 47392825855640 }], "defined_class": "IO" }, { "id": 74, "event": "return", "elapsed": 3.9683e-05, "parent_id": 73, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "46", "object_id": 93 } }, { "id": 75, "event": "return", "elapsed": 0.000130109, "parent_id": 72, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "46", "object_id": 93 } }, { "id": 76, "event": "return", "elapsed": 0.000244531, "parent_id": 71, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 77, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "1", "object_id": 3 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "String", "value": "  Parameters: {\"ally_id\"=\u003e\"19\"}", "object_id": 47392826050300 }], "defined_class": "Logger" }, { "id": 78, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "  Parameters: {\"ally_id\"=\u003e\"19\"}\n", "object_id": 47392826114960 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 79, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "  Parameters: {\"ally_id\"=\u003e\"19\"}\n", "object_id": 47392826114960 }], "defined_class": "IO" }, { "id": 80, "event": "return", "elapsed": 2.9067e-05, "parent_id": 79, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "32", "object_id": 65 } }, { "id": 81, "event": "return", "elapsed": 0.000103512, "parent_id": 78, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "32", "object_id": 65 } }, { "id": 82, "event": "return", "elapsed": 0.000192449, "parent_id": 77, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 83, "event": "call", "message": [{ "name": "ally_id", "class": "String", "value": "19", "object_id": 47392825732460 }, { "name": "controller", "class": "String", "value": "allies", "object_id": 47392801388280 }, { "name": "action", "class": "String", "value": "remove", "object_id": 47392825590320 }], "thread_id": 47392722082140, "http_server_request": { "path_info": "/allies/remove", "request_method": "DELETE", "normalized_path_info": "/allies/remove" } }, { "id": 84, "path": "app/controllers/concerns/page_redirect_concern.rb", "event": "call", "lineno": 9, "static": false, "receiver": { "class": "AlliesController", "value": "#\u003cAlliesController:0x00005635038d5ef8\u003e", "object_id": 47392846425980 }, "method_id": "if_not_signed_in", "thread_id": 47392722082140, "parameters": [], "defined_class": "PageRedirectConcern" }, { "id": 85, "event": "return", "elapsed": 0.000116866, "parent_id": 84, "thread_id": 47392722082140 }, { "id": 86, "path": "app/controllers/allies_controller.rb", "event": "call", "lineno": 25, "static": false, "receiver": { "class": "AlliesController", "value": "#\u003cAlliesController:0x00005635038d5ef8\u003e", "object_id": 47392846425980 }, "method_id": "remove", "thread_id": 47392722082140, "parameters": [], "defined_class": "AlliesController" }, { "id": 87, "path": "app/controllers/concerns/page_redirect_concern.rb", "event": "call", "lineno": 15, "static": false, "receiver": { "class": "AlliesController", "value": "#\u003cAlliesController:0x00005635038d5ef8\u003e", "object_id": 47392846425980 }, "method_id": "redirect_to_path", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "path", "class": "String", "value": "/allies", "object_id": 47392826870320 }], "defined_class": "PageRedirectConcern" }, { "id": 88, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "1", "object_id": 3 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "Logger" }, { "id": 89, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "Redirected to http://test.host/allies\n", "object_id": 47392826978380 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 90, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "Redirected to http://test.host/allies\n", "object_id": 47392826978380 }], "defined_class": "IO" }, { "id": 91, "event": "return", "elapsed": 3.3541e-05, "parent_id": 90, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "38", "object_id": 77 } }, { "id": 92, "event": "return", "elapsed": 0.000119437, "parent_id": 89, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "38", "object_id": 77 } }, { "id": 93, "event": "return", "elapsed": 0.000224917, "parent_id": 88, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 94, "event": "return", "elapsed": 0.000624416, "parent_id": 87, "thread_id": 47392722082140, "return_value": { "class": "String", "value": "\u003chtml\u003e\u003cbody\u003eYou are being \u003ca href=\"http://test.host/allies\"\u003eredirected\u003c/a\u003e.\u003c/body\u003e\u003c/html\u003e", "object_id": 47392826926040 } }, { "id": 95, "event": "return", "elapsed": 0.001020897, "parent_id": 86, "thread_id": 47392722082140, "return_value": { "class": "String", "value": "\u003chtml\u003e\u003cbody\u003eYou are being \u003ca href=\"http://test.host/allies\"\u003eredirected\u003c/a\u003e.\u003c/body\u003e\u003c/html\u003e", "object_id": 47392826926040 } }, { "id": 96, "path": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "event": "call", "lineno": 455, "static": false, "receiver": { "class": "ActiveSupport::Logger", "value": "#\u003cActiveSupport::Logger:0x00005634f936cf70\u003e", "object_id": 47392759703480 }, "method_id": "add", "thread_id": 47392722082140, "parameters": [{ "kind": "req", "name": "severity", "class": "Integer", "value": "1", "object_id": 3 }, { "kind": "opt", "name": "message", "class": "NilClass", "value": null, "object_id": 8 }, { "kind": "opt", "name": "progname", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "Logger" }, { "id": 97, "path": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb", "event": "call", "lineno": 44, "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "args", "class": "String", "value": "Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 988)\n", "object_id": 47392827177480 }, { "kind": "block", "name": "block", "class": "NilClass", "value": null, "object_id": 8 }], "defined_class": "IO" }, { "id": 98, "path": "IO#write", "event": "call", "static": false, "receiver": { "class": "File", "value": "#\u003cFile:0x00005634f936fd38\u003e", "object_id": 47392759709340 }, "method_id": "write", "thread_id": 47392722082140, "parameters": [{ "kind": "rest", "name": "arg", "class": "String", "value": "Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 988)\n", "object_id": 47392827177480 }], "defined_class": "IO" }, { "id": 99, "event": "return", "elapsed": 2.9963e-05, "parent_id": 98, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "68", "object_id": 137 } }, { "id": 100, "event": "return", "elapsed": 0.000107943, "parent_id": 97, "thread_id": 47392722082140, "return_value": { "class": "Integer", "value": "68", "object_id": 137 } }, { "id": 101, "event": "return", "elapsed": 0.000234775, "parent_id": 96, "thread_id": 47392722082140, "return_value": { "class": "TrueClass", "value": "true", "object_id": 20 } }, { "id": 102, "event": "return", "elapsed": 0.002183657, "parent_id": 83, "thread_id": 47392722082140, "http_server_response": { "status": 302 } }], "version": "1.2", "classMap": [{ "name": "app/models", "type": "package", "children": [{ "name": "User", "type": "class", "children": [{ "name": "set_defaults", "type": "function", "static": false, "location": "app/models/user.rb:119", "display_name": "Set Defaults For User", "labels": ["action"] }, { "name": "oauth_enabled?", "type": "function", "static": false, "location": "app/models/user.rb:110", "display_name": "Is User Oauth Enabled?", "labels": ["getter"] }, { "name": "remove_leading_trailing_whitespace", "type": "function", "static": false, "location": "app/models/user.rb:114", "display_name": "Remove Leading Trailing Whitespace For User", "labels": ["action"] }] }] }, { "name": "logger", "type": "package", "children": [{ "name": "Logger", "type": "class", "children": [{ "name": "add", "type": "function", "labels": ["log", "io"], "static": false, "location": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb:455", "display_name": "Add Logger", "computed_labels": ["action"] }] }] }, { "name": "io", "type": "package", "children": [{ "name": "IO", "type": "class", "children": [{ "name": "write", "type": "function", "labels": ["io"], "static": false, "location": "/home/travis/.rvm/gems/ruby-2.6.6/gems/appmap-0.34.2/lib/appmap/hook/method.rb:44", "display_name": "Write Io", "computed_labels": ["action"] }, { "name": "write", "type": "function", "labels": ["io"], "static": false, "location": "IO#write", "display_name": null, "computed_labels": null }] }] }, { "name": "app/controllers", "type": "package", "children": [{ "name": "PageRedirectConcern", "type": "class", "children": [{ "name": "if_not_signed_in", "type": "function", "static": false, "location": "app/controllers/concerns/page_redirect_concern.rb:9", "display_name": "Get Page Redirect Concern If Not Signed In", "labels": ["getter"] }, { "name": "redirect_to_path", "type": "function", "static": false, "location": "app/controllers/concerns/page_redirect_concern.rb:15", "display_name": "Get Redirect To Path", "labels": ["setter"] }] }, { "name": "AlliesController", "type": "class", "children": [{ "name": "remove", "type": "function", "static": false, "location": "app/controllers/allies_controller.rb:25", "display_name": "Remove Allies", "labels": ["action"] }] }] }], "metadata": { "app": "ifme", "git": { "branch": "appland", "commit": "4a4bdb7c7f1b8022be7cdc98d6fb9ce69621eb26", "repository": "https://github.com/land-of-apps/ifme.git" }, "name": "AlliesController DELETE #remove when user is logged in deletes the allyship", "client": { "url": "https://github.com/applandinc/appmap-ruby", "name": "appmap", "version": "0.34.2" }, "feature": "AlliesController DELETE #remove", "language": { "name": "ruby", "engine": "ruby", "version": "2.6.6" }, "recorder": { "name": "rspec" }, "frameworks": [{ "name": "rails", "version": "6.0.3.2" }, { "name": "rspec", "version": "3.9.2" }], "feature_group": "Allies" } }, "org_id": 125, "mapset_id": 2057, "link_sharing": false, "name": "AlliesController DELETE #remove when user is logged in deletes the allyship" };
</script>

<script>
  window.componentDiagramModel = { "packages": ["app/controllers", "app/services", "logger", "SQL", "json", "app/models", "app/helpers", "io", "openssl", "app/mailers", "net/http", "HTTP"], "class_package": { "AlliesController": "app/controllers", "PageRedirectConcern": "app/controllers", "AllyshipCreator": "app/services", "CarePlanContactsConcern": "app/controllers", "Logger": "logger", "SQL": "SQL", "CarePlanContactsController": "app/controllers", "JSON::Ext::Generator::State": "json", "CategoriesController": "app/controllers", "Shared": "app/controllers", "SharedBasicConcern": "app/controllers", "CollectionPageSetupConcern": "app/controllers", "CommentController": "app/controllers", "Meeting": "app/models", "CommentNotificationsService": "app/services", "CommentViewersService": "app/services", "GroupsController": "app/controllers", "Groups::MembershipsController": "app/controllers", "GroupMember": "app/models", "LocalesController": "app/controllers", "User": "app/models", "MedicationsController": "app/controllers", "MedicationRefillHelper": "app/helpers", "MeetingsController": "app/controllers", "Group": "app/models", "MeetingNotificationsService": "app/services", "Meetings::GoogleCalendarEventController": "app/controllers", "MomentsController": "app/controllers", "MomentsHelper": "app/helpers", "MoodsController": "app/controllers", "PagesConcern": "app/controllers", "JSON::Ext::Parser": "json", "PagesController": "app/controllers", "Medium": "app/services", "ProfileController": "app/controllers", "ProfileHelper": "app/helpers", "ReportsController": "app/controllers", "AllyConcern": "app/models", "SearchController": "app/controllers", "IO": "io", "StrategiesConcern": "app/controllers", "StrategiesController": "app/controllers", "ApplicationMailerHelper": "app/helpers", "NotificationMailerHelper": "app/helpers", "AssetsHelper": "app/helpers", "Digest::Instance": "openssl", "CategoriesHelper": "app/helpers", "FormHelper": "app/helpers", "CommentsFormHelper": "app/helpers", "CommentsHelper": "app/helpers", "TimeAgo": "app/services", "GroupNotificationHelper": "app/helpers", "GroupsHelper": "app/helpers", "MeetingsHelper": "app/helpers", "MomentsFormHelper": "app/helpers", "MoodsHelper": "app/helpers", "StrategiesHelper": "app/helpers", "Moment": "app/models", "ResourceRecommendations": "app/services", "MomentsStatsHelper": "app/helpers", "MostFocusHelper": "app/helpers", "StoriesHelper": "app/helpers", "ReminderHelper": "app/helpers", "Medication": "app/models", "Strategy": "app/models", "StrategiesFormHelper": "app/helpers", "TagsHelper": "app/helpers", "ViewersHelper": "app/helpers", "ApplicationMailer": "app/mailers", "AllyNotifications::NewAllyRequest": "app/mailers", "NotificationMailer": "app/mailers", "ReportMailer": "app/mailers", "Allyship": "app/models", "Comment": "app/models", "PasswordValidator": "app/models", "Allyships::AllianceNotifier": "app/services", "CloudinaryService": "app/services", "GroupNotifier": "app/services", "MedicationReminders": "app/services", "Net::HTTP": "net/http", "MomentKeywords": "app/services", "ProfilePicture": "app/services", "DELETE /allies/remove": "HTTP", "DELETE /comment/delete": "HTTP", "DELETE /groups/:group_id/membership/:member_id": "HTTP", "DELETE /medications/:id": "HTTP", "DELETE /meetings/:id": "HTTP", "DELETE /moments/:id": "HTTP", "DELETE /strategies/:id": "HTTP", "GET /about": "HTTP", "GET /de": "HTTP", "GET /groups": "HTTP", "GET /:locale": "HTTP", "GET /meetings/:id": "HTTP", "GET /meetings/join": "HTTP", "GET /moments": "HTTP", "GET /pages/home": "HTTP", "GET /profile": "HTTP", "GET /resources": "HTTP", "GET /search": "HTTP", "GET /strategies/:id/edit": "HTTP", "PATCH /meetings/:id": "HTTP", "POST /allies/add": "HTTP", "POST /care_plan_contacts/create": "HTTP", "POST /categories": "HTTP", "POST /categories/quick_create": "HTTP", "POST /medications": "HTTP", "POST /meetings": "HTTP", "POST /meetings/:meeting_id/google_calendar_event": "HTTP", "POST /moods/premade": "HTTP", "POST /profile/remove_ban": "HTTP", "POST /reports": "HTTP", "POST /strategies": "HTTP", "PUT /groups/:id": "HTTP", "PUT /medications/:id": "HTTP" }, "package_classes": { "app/controllers": ["AlliesController", "PageRedirectConcern", "CarePlanContactsConcern", "CarePlanContactsController", "CategoriesController", "Shared", "SharedBasicConcern", "CollectionPageSetupConcern", "CommentController", "GroupsController", "Groups::MembershipsController", "LocalesController", "MedicationsController", "MeetingsController", "Meetings::GoogleCalendarEventController", "MomentsController", "MoodsController", "PagesConcern", "PagesController", "ProfileController", "ReportsController", "SearchController", "StrategiesConcern", "StrategiesController"], "app/services": ["AllyshipCreator", "CommentNotificationsService", "CommentViewersService", "MeetingNotificationsService", "Medium", "TimeAgo", "ResourceRecommendations", "Allyships::AllianceNotifier", "CloudinaryService", "GroupNotifier", "MedicationReminders", "MomentKeywords", "ProfilePicture"], "logger": ["Logger"], "SQL": ["SQL"], "json": ["JSON::Ext::Generator::State", "JSON::Ext::Parser"], "app/models": ["Meeting", "GroupMember", "User", "Group", "AllyConcern", "Moment", "Medication", "Strategy", "Allyship", "Comment", "PasswordValidator"], "app/helpers": ["MedicationRefillHelper", "MomentsHelper", "ProfileHelper", "ApplicationMailerHelper", "NotificationMailerHelper", "AssetsHelper", "CategoriesHelper", "FormHelper", "CommentsFormHelper", "CommentsHelper", "GroupNotificationHelper", "GroupsHelper", "MeetingsHelper", "MomentsFormHelper", "MoodsHelper", "StrategiesHelper", "MomentsStatsHelper", "MostFocusHelper", "StoriesHelper", "ReminderHelper", "StrategiesFormHelper", "TagsHelper", "ViewersHelper"], "io": ["IO"], "openssl": ["Digest::Instance"], "app/mailers": ["ApplicationMailer", "AllyNotifications::NewAllyRequest", "NotificationMailer", "ReportMailer"], "net/http": ["Net::HTTP"], "HTTP": ["DELETE /allies/remove", "DELETE /comment/delete", "DELETE /groups/:group_id/membership/:member_id", "DELETE /medications/:id", "DELETE /meetings/:id", "DELETE /moments/:id", "DELETE /strategies/:id", "GET /about", "GET /de", "GET /groups", "GET /:locale", "GET /meetings/:id", "GET /meetings/join", "GET /moments", "GET /pages/home", "GET /profile", "GET /resources", "GET /search", "GET /strategies/:id/edit", "PATCH /meetings/:id", "POST /allies/add", "POST /care_plan_contacts/create", "POST /categories", "POST /categories/quick_create", "POST /medications", "POST /meetings", "POST /meetings/:meeting_id/google_calendar_event", "POST /moods/premade", "POST /profile/remove_ban", "POST /reports", "POST /strategies", "PUT /groups/:id", "PUT /medications/:id"] }, "controller_packages": ["app/controllers", "logger", "SQL", "app/models"], "package_calls": { "app/controllers": ["app/controllers", "app/services", "logger", "SQL", "json", "app/models", "app/helpers", "io"], "app/helpers": ["app/helpers", "io", "openssl", "logger", "SQL", "app/models", "app/services"], "app/mailers": ["app/helpers", "app/mailers", "logger", "json", "SQL"], "app/models": ["app/models", "logger", "SQL", "app/mailers", "json", "openssl"], "app/services": ["app/models", "app/services", "logger", "SQL", "app/mailers", "json", "openssl", "net/http"], "HTTP": ["app/controllers", "logger", "SQL", "app/models"], "io": ["io"], "json": ["json"], "logger": ["io", "net/http"], "net/http": ["io", "net/http"] }, "class_calls": { "AlliesController": ["PageRedirectConcern", "AllyshipCreator"], "CarePlanContactsConcern": ["Logger", "SQL"], "CarePlanContactsController": ["CarePlanContactsConcern", "JSON::Ext::Generator::State"], "CategoriesController": ["Shared", "SharedBasicConcern", "Logger"], "CollectionPageSetupConcern": ["CollectionPageSetupConcern", "Logger", "SQL"], "CommentController": ["Meeting", "CommentNotificationsService", "CommentViewersService", "JSON::Ext::Generator::State", "Logger", "SQL"], "GroupsController": ["JSON::Ext::Generator::State"], "Groups::MembershipsController": ["GroupMember", "Logger", "SQL"], "LocalesController": ["User", "Logger", "SQL"], "MedicationsController": ["MedicationsController", "PageRedirectConcern", "MedicationRefillHelper", "Logger", "SQL"], "MeetingsController": ["PageRedirectConcern", "Group", "Meeting", "MeetingNotificationsService", "Logger", "SQL"], "Meetings::GoogleCalendarEventController": ["Meeting", "User", "Logger"], "MomentsController": ["CollectionPageSetupConcern", "PageRedirectConcern", "MomentsHelper", "Logger", "SQL"], "MoodsController": ["PageRedirectConcern", "Shared"], "PageRedirectConcern": ["PageRedirectConcern", "User", "Logger", "SQL"], "PagesConcern": ["PagesConcern", "JSON::Ext::Parser"], "PagesController": ["PagesConcern", "Medium", "JSON::Ext::Parser"], "ProfileController": ["ProfileHelper"], "ReportsController": ["AllyConcern", "Logger", "SQL"], "SearchController": ["IO"], "Shared": ["PageRedirectConcern", "JSON::Ext::Generator::State", "Logger", "SQL"], "SharedBasicConcern": ["Shared"], "StrategiesConcern": ["Logger"], "StrategiesController": ["PageRedirectConcern", "Shared", "StrategiesConcern", "AllyConcern", "Logger", "SQL"], "ApplicationMailerHelper": ["ApplicationMailerHelper", "NotificationMailerHelper"], "AssetsHelper": ["IO", "Digest::Instance"], "CategoriesHelper": ["FormHelper"], "CommentsFormHelper": ["FormHelper", "Logger", "SQL"], "CommentsHelper": ["User", "CommentViewersService", "TimeAgo", "Logger", "SQL"], "FormHelper": ["FormHelper"], "GroupNotificationHelper": ["NotificationMailerHelper"], "GroupsHelper": ["GroupsHelper", "Logger", "SQL"], "MedicationRefillHelper": ["User", "Logger", "SQL"], "MeetingsHelper": ["User", "Logger", "SQL"], "MomentsFormHelper": ["CategoriesHelper", "FormHelper", "MoodsHelper", "StrategiesHelper", "Moment", "Logger", "SQL"], "MomentsHelper": ["Moment", "ResourceRecommendations", "Logger", "SQL"], "MomentsStatsHelper": ["User", "Logger", "SQL"], "MoodsHelper": ["FormHelper"], "MostFocusHelper": ["User", "Logger", "SQL"], "NotificationMailerHelper": ["NotificationMailerHelper", "Logger", "SQL"], "ProfileHelper": ["StoriesHelper"], "ReminderHelper": ["Medication", "Strategy"], "StoriesHelper": ["AllyConcern", "User", "Logger", "SQL"], "StrategiesFormHelper": ["CategoriesHelper", "Strategy"], "StrategiesHelper": ["FormHelper", "StrategiesFormHelper", "Logger", "SQL"], "TagsHelper": ["Logger", "SQL"], "ViewersHelper": ["Logger", "SQL"], "ApplicationMailer": ["ApplicationMailerHelper", "GroupNotificationHelper", "NotificationMailerHelper", "AllyNotifications::NewAllyRequest", "Logger"], "NotificationMailer": ["ApplicationMailer", "JSON::Ext::Parser", "Logger", "SQL"], "ReportMailer": ["Logger"], "AllyConcern": ["AllyConcern", "Logger", "SQL"], "Allyship": ["Allyship", "Logger", "SQL"], "Comment": ["NotificationMailer", "Comment", "JSON::Ext::Generator::State", "Logger", "Digest::Instance", "SQL"], "Group": ["Logger", "SQL"], "GroupMember": ["Logger", "SQL"], "Meeting": ["Logger", "SQL"], "Moment": ["Logger", "SQL"], "PasswordValidator": ["User"], "User": ["User", "Logger", "SQL"], "AllyshipCreator": ["Allyship", "AllyshipCreator", "Allyships::AllianceNotifier", "Logger", "SQL"], "Allyships::AllianceNotifier": ["NotificationMailer", "Allyships::AllianceNotifier", "JSON::Ext::Generator::State", "Logger", "Digest::Instance", "SQL"], "CloudinaryService": ["Digest::Instance"], "CommentNotificationsService": ["Logger", "SQL"], "CommentViewersService": ["CommentViewersService", "Logger", "SQL"], "GroupNotifier": ["JSON::Ext::Generator::State", "Logger", "Digest::Instance", "SQL"], "MedicationReminders": ["Logger", "SQL"], "Medium": ["JSON::Ext::Parser", "Net::HTTP"], "MeetingNotificationsService": ["MeetingNotificationsService", "Logger", "SQL"], "MomentKeywords": ["Logger", "SQL"], "ProfilePicture": ["ProfilePicture", "JSON::Ext::Generator::State"], "ResourceRecommendations": ["MomentKeywords", "JSON::Ext::Parser"], "TimeAgo": ["TimeAgo"], "DELETE /allies/remove": ["AlliesController", "PageRedirectConcern", "Logger"], "DELETE /comment/delete": ["CommentController", "PageRedirectConcern", "Logger"], "DELETE /groups/:group_id/membership/:member_id": ["Groups::MembershipsController", "PageRedirectConcern", "Logger"], "DELETE /medications/:id": ["MedicationsController", "PageRedirectConcern", "Logger", "SQL"], "DELETE /meetings/:id": ["MeetingsController", "PageRedirectConcern", "Logger", "SQL"], "DELETE /moments/:id": ["MomentsController", "PageRedirectConcern", "Logger", "SQL"], "DELETE /strategies/:id": ["PageRedirectConcern", "StrategiesController", "Logger", "SQL"], "GET /about": ["PagesController", "Logger"], "GET /de": ["LocalesController", "User", "Logger", "SQL"], "GET /groups": ["PageRedirectConcern", "Logger"], "GET /:locale": ["LocalesController", "Logger"], "GET /meetings/:id": ["MeetingsController", "PageRedirectConcern", "Logger", "SQL"], "GET /meetings/join": ["MeetingsController", "PageRedirectConcern", "Logger"], "GET /moments": ["MomentsController", "PageRedirectConcern", "Logger"], "GET /pages/home": ["PagesController", "Logger"], "GET /profile": ["PageRedirectConcern", "ProfileController", "Logger"], "GET /resources": ["PagesController", "Logger"], "GET /search": ["PageRedirectConcern", "SearchController", "Logger"], "GET /strategies/:id/edit": ["PageRedirectConcern", "StrategiesController", "Logger", "SQL"], "PATCH /meetings/:id": ["PageRedirectConcern", "Logger", "SQL"], "POST /allies/add": ["AlliesController", "PageRedirectConcern", "Logger"], "POST /care_plan_contacts/create": ["CarePlanContactsController", "PageRedirectConcern", "Logger"], "POST /categories": ["CategoriesController", "PageRedirectConcern", "Logger"], "POST /categories/quick_create": ["CategoriesController", "PageRedirectConcern", "Logger"], "POST /medications": ["MedicationsController", "PageRedirectConcern", "Logger"], "POST /meetings": ["MeetingsController", "PageRedirectConcern", "Logger"], "POST /meetings/:meeting_id/google_calendar_event": ["Meetings::GoogleCalendarEventController", "PageRedirectConcern", "Meeting", "Logger", "SQL"], "POST /moods/premade": ["MoodsController", "PageRedirectConcern", "Logger"], "POST /profile/remove_ban": ["PageRedirectConcern", "ProfileController", "Logger"], "POST /reports": ["PageRedirectConcern", "ReportsController", "Logger"], "POST /strategies": ["PageRedirectConcern", "StrategiesController", "Logger"], "PUT /groups/:id": ["GroupsController", "PageRedirectConcern", "Logger", "SQL"], "PUT /medications/:id": ["MedicationsController", "PageRedirectConcern", "Logger", "SQL"], "IO": ["IO"], "JSON::Ext::Generator::State": ["JSON::Ext::Generator::State"], "Logger": ["IO", "Net::HTTP"], "Net::HTTP": ["IO", "Net::HTTP"] }, "class_callers": { "PageRedirectConcern": ["AlliesController", "MedicationsController", "MeetingsController", "MomentsController", "MoodsController", "PageRedirectConcern", "Shared", "StrategiesController", "DELETE /allies/remove", "DELETE /comment/delete", "DELETE /groups/:group_id/membership/:member_id", "DELETE /medications/:id", "DELETE /meetings/:id", "DELETE /moments/:id", "DELETE /strategies/:id", "GET /groups", "GET /meetings/:id", "GET /meetings/join", "GET /moments", "GET /profile", "GET /search", "GET /strategies/:id/edit", "PATCH /meetings/:id", "POST /allies/add", "POST /care_plan_contacts/create", "POST /categories", "POST /categories/quick_create", "POST /medications", "POST /meetings", "POST /meetings/:meeting_id/google_calendar_event", "POST /moods/premade", "POST /profile/remove_ban", "POST /reports", "POST /strategies", "PUT /groups/:id", "PUT /medications/:id"], "AllyshipCreator": ["AlliesController", "AllyshipCreator"], "Logger": ["CarePlanContactsConcern", "CategoriesController", "CollectionPageSetupConcern", "CommentController", "Groups::MembershipsController", "LocalesController", "MedicationsController", "MeetingsController", "Meetings::GoogleCalendarEventController", "MomentsController", "PageRedirectConcern", "ReportsController", "Shared", "StrategiesConcern", "StrategiesController", "CommentsFormHelper", "CommentsHelper", "GroupsHelper", "MedicationRefillHelper", "MeetingsHelper", "MomentsFormHelper", "MomentsHelper", "MomentsStatsHelper", "MostFocusHelper", "NotificationMailerHelper", "StoriesHelper", "StrategiesHelper", "TagsHelper", "ViewersHelper", "ApplicationMailer", "NotificationMailer", "ReportMailer", "AllyConcern", "Allyship", "Comment", "Group", "GroupMember", "Meeting", "Moment", "User", "AllyshipCreator", "Allyships::AllianceNotifier", "CommentNotificationsService", "CommentViewersService", "GroupNotifier", "MedicationReminders", "MeetingNotificationsService", "MomentKeywords", "DELETE /allies/remove", "DELETE /comment/delete", "DELETE /groups/:group_id/membership/:member_id", "DELETE /medications/:id", "DELETE /meetings/:id", "DELETE /moments/:id", "DELETE /strategies/:id", "GET /about", "GET /de", "GET /groups", "GET /:locale", "GET /meetings/:id", "GET /meetings/join", "GET /moments", "GET /pages/home", "GET /profile", "GET /resources", "GET /search", "GET /strategies/:id/edit", "PATCH /meetings/:id", "POST /allies/add", "POST /care_plan_contacts/create", "POST /categories", "POST /categories/quick_create", "POST /medications", "POST /meetings", "POST /meetings/:meeting_id/google_calendar_event", "POST /moods/premade", "POST /profile/remove_ban", "POST /reports", "POST /strategies", "PUT /groups/:id", "PUT /medications/:id"], "SQL": ["CarePlanContactsConcern", "CollectionPageSetupConcern", "CommentController", "Groups::MembershipsController", "LocalesController", "MedicationsController", "MeetingsController", "MomentsController", "PageRedirectConcern", "ReportsController", "Shared", "StrategiesController", "CommentsFormHelper", "CommentsHelper", "GroupsHelper", "MedicationRefillHelper", "MeetingsHelper", "MomentsFormHelper", "MomentsHelper", "MomentsStatsHelper", "MostFocusHelper", "NotificationMailerHelper", "StoriesHelper", "StrategiesHelper", "TagsHelper", "ViewersHelper", "NotificationMailer", "AllyConcern", "Allyship", "Comment", "Group", "GroupMember", "Meeting", "Moment", "User", "AllyshipCreator", "Allyships::AllianceNotifier", "CommentNotificationsService", "CommentViewersService", "GroupNotifier", "MedicationReminders", "MeetingNotificationsService", "MomentKeywords", "DELETE /medications/:id", "DELETE /meetings/:id", "DELETE /moments/:id", "DELETE /strategies/:id", "GET /de", "GET /meetings/:id", "GET /strategies/:id/edit", "PATCH /meetings/:id", "POST /meetings/:meeting_id/google_calendar_event", "PUT /groups/:id", "PUT /medications/:id"], "CarePlanContactsConcern": ["CarePlanContactsController"], "JSON::Ext::Generator::State": ["CarePlanContactsController", "CommentController", "GroupsController", "Shared", "Comment", "Allyships::AllianceNotifier", "GroupNotifier", "ProfilePicture", "JSON::Ext::Generator::State"], "Shared": ["CategoriesController", "MoodsController", "SharedBasicConcern", "StrategiesController"], "SharedBasicConcern": ["CategoriesController"], "CollectionPageSetupConcern": ["CollectionPageSetupConcern", "MomentsController"], "Meeting": ["CommentController", "MeetingsController", "Meetings::GoogleCalendarEventController", "POST /meetings/:meeting_id/google_calendar_event"], "CommentNotificationsService": ["CommentController"], "CommentViewersService": ["CommentController", "CommentsHelper", "CommentViewersService"], "GroupMember": ["Groups::MembershipsController"], "User": ["LocalesController", "Meetings::GoogleCalendarEventController", "PageRedirectConcern", "CommentsHelper", "MedicationRefillHelper", "MeetingsHelper", "MomentsStatsHelper", "MostFocusHelper", "StoriesHelper", "PasswordValidator", "User", "GET /de"], "MedicationsController": ["MedicationsController", "DELETE /medications/:id", "POST /medications", "PUT /medications/:id"], "MedicationRefillHelper": ["MedicationsController"], "Group": ["MeetingsController"], "MeetingNotificationsService": ["MeetingsController", "MeetingNotificationsService"], "MomentsHelper": ["MomentsController"], "PagesConcern": ["PagesConcern", "PagesController"], "JSON::Ext::Parser": ["PagesConcern", "PagesController", "NotificationMailer", "Medium", "ResourceRecommendations"], "Medium": ["PagesController"], "ProfileHelper": ["ProfileController"], "AllyConcern": ["ReportsController", "StrategiesController", "StoriesHelper", "AllyConcern"], "IO": ["SearchController", "AssetsHelper", "IO", "Logger", "Net::HTTP"], "StrategiesConcern": ["StrategiesController"], "ApplicationMailerHelper": ["ApplicationMailerHelper", "ApplicationMailer"], "NotificationMailerHelper": ["ApplicationMailerHelper", "GroupNotificationHelper", "NotificationMailerHelper", "ApplicationMailer"], "Digest::Instance": ["AssetsHelper", "Comment", "Allyships::AllianceNotifier", "CloudinaryService", "GroupNotifier"], "FormHelper": ["CategoriesHelper", "CommentsFormHelper", "FormHelper", "MomentsFormHelper", "MoodsHelper", "StrategiesHelper"], "TimeAgo": ["CommentsHelper", "TimeAgo"], "GroupsHelper": ["GroupsHelper"], "CategoriesHelper": ["MomentsFormHelper", "StrategiesFormHelper"], "MoodsHelper": ["MomentsFormHelper"], "StrategiesHelper": ["MomentsFormHelper"], "Moment": ["MomentsFormHelper", "MomentsHelper"], "ResourceRecommendations": ["MomentsHelper"], "StoriesHelper": ["ProfileHelper"], "Medication": ["ReminderHelper"], "Strategy": ["ReminderHelper", "StrategiesFormHelper"], "StrategiesFormHelper": ["StrategiesHelper"], "GroupNotificationHelper": ["ApplicationMailer"], "AllyNotifications::NewAllyRequest": ["ApplicationMailer"], "ApplicationMailer": ["NotificationMailer"], "Allyship": ["Allyship", "AllyshipCreator"], "NotificationMailer": ["Comment", "Allyships::AllianceNotifier"], "Comment": ["Comment"], "Allyships::AllianceNotifier": ["AllyshipCreator", "Allyships::AllianceNotifier"], "Net::HTTP": ["Medium", "Logger", "Net::HTTP"], "ProfilePicture": ["ProfilePicture"], "MomentKeywords": ["ResourceRecommendations"], "AlliesController": ["DELETE /allies/remove", "POST /allies/add"], "CommentController": ["DELETE /comment/delete"], "Groups::MembershipsController": ["DELETE /groups/:group_id/membership/:member_id"], "MeetingsController": ["DELETE /meetings/:id", "GET /meetings/:id", "GET /meetings/join", "POST /meetings"], "MomentsController": ["DELETE /moments/:id", "GET /moments"], "StrategiesController": ["DELETE /strategies/:id", "GET /strategies/:id/edit", "POST /strategies"], "PagesController": ["GET /about", "GET /pages/home", "GET /resources"], "LocalesController": ["GET /de", "GET /:locale"], "ProfileController": ["GET /profile", "POST /profile/remove_ban"], "SearchController": ["GET /search"], "CarePlanContactsController": ["POST /care_plan_contacts/create"], "CategoriesController": ["POST /categories", "POST /categories/quick_create"], "Meetings::GoogleCalendarEventController": ["POST /meetings/:meeting_id/google_calendar_event"], "MoodsController": ["POST /moods/premade"], "ReportsController": ["POST /reports"], "GroupsController": ["PUT /groups/:id"] }, "class_locations": { "IO": "IO#read", "User": "app/models/user.rb", "Group": "app/models/group.rb", "Digest::Instance": "Digest", "JSON::Ext::Parser": "JSON", "Moment": "app/models/moment.rb", "Comment": "app/models/comment.rb", "Meeting": "app/models/meeting.rb", "Support": "app/models/support.rb", "Medium": "app/services/medium.rb", "Allyship": "app/models/allyship.rb", "Strategy": "app/models/strategy.rb", "TimeAgo": "app/services/time_ago.rb", "Medication": "app/models/medication.rb", "FormHelper": "app/helpers/form_helper.rb", "PagesHelper": "app/helpers/pages_helper.rb", "TagsHelper": "app/helpers/tags_helper.rb", "GroupMember": "app/models/group_member.rb", "AssetsHelper": "app/helpers/assets_helper.rb", "GroupsHelper": "app/helpers/groups_helper.rb", "HeaderHelper": "app/helpers/header_helper.rb", "MoodsHelper": "app/helpers/moods_helper.rb", "ReportMailer": "app/mailers/report_mailer.rb", "StoriesHelper": "app/helpers/stories_helper.rb", "CommentsHelper": "app/helpers/comments_helper.rb", "MeetingsHelper": "app/helpers/meetings_helper.rb", "MomentsHelper": "app/helpers/moments_helper.rb", "ProfileHelper": "app/helpers/profile_helper.rb", "ReminderHelper": "app/helpers/reminder_helper.rb", "ViewersHelper": "app/helpers/viewers_helper.rb", "GroupNotifier": "app/services/group_notifier.rb", "MomentKeywords": "app/services/moment_keywords.rb", "CategoriesHelper": "app/helpers/categories_helper.rb", "MostFocusHelper": "app/helpers/most_focus_helper.rb", "ProfilePicture": "app/services/profile_picture.rb", "ApplicationHelper": "app/helpers/application_helper.rb", "StrategiesHelper": "app/helpers/strategies_helper.rb", "AllyshipCreator": "app/services/allyship_creator.rb", "JSON::Ext::Generator::State": "JSON", "MomentsFormHelper": "app/helpers/moments_form_helper.rb", "ApplicationMailer": "app/mailers/application_mailer.rb", "CalendarUploader": "app/services/calendar_uploader.rb", "Shared": "app/controllers/concerns/shared.rb", "CommentsFormHelper": "app/helpers/comments_form_helper.rb", "DashboardNavHelper": "app/helpers/dashboard_nav_helper.rb", "MomentsStatsHelper": "app/helpers/moments_stats_helper.rb", "NotificationMailer": "app/mailers/notification_mailer.rb", "AllyConcern": "app/models/concerns/ally_concern.rb", "CloudinaryService": "app/services/cloudinary_service.rb", "MoodsController": "app/controllers/moods_controller.rb", "PagesController": "app/controllers/pages_controller.rb", "SearchController": "app/controllers/search_controller.rb", "NotificationsHelper": "app/helpers/notifications_helper.rb", "MedicationReminders": "app/services/medication_reminders.rb", "AlliesController": "app/controllers/allies_controller.rb", "GroupsController": "app/controllers/groups_controller.rb", "LocalesController": "app/controllers/locales_controller.rb", "ProfileController": "app/controllers/profile_controller.rb", "ReportsController": "app/controllers/reports_controller.rb", "StrategiesFormHelper": "app/helpers/strategies_form_helper.rb", "CommentController": "app/controllers/comment_controller.rb", "MeetingsController": "app/controllers/meetings_controller.rb", "MomentsController": "app/controllers/moments_controller.rb", "MedicationRefillHelper": "app/helpers/medication_refill_helper.rb", "ApplicationMailerHelper": "app/helpers/application_mailer_helper.rb", "CommentViewersService": "app/services/comment_viewers_service.rb", "CategoriesController": "app/controllers/categories_controller.rb", "StrategiesController": "app/controllers/strategies_controller.rb", "GroupNotificationHelper": "app/helpers/group_notification_helper.rb", "PasswordValidator": "app/models/concerns/password_validator.rb", "ResourceRecommendations": "app/services/resource_recommendations.rb", "PagesConcern": "app/controllers/concerns/pages_concern.rb", "MedicationsController": "app/controllers/medications_controller.rb", "NotificationMailerHelper": "app/helpers/notification_mailer_helper.rb", "Allyships::AllianceNotifier": "app/services/allyships/alliance_notifier.rb", "CommentNotificationsService": "app/services/comment_notifications_service.rb", "MeetingNotificationsService": "app/services/meeting_notifications_service.rb", "StrategiesConcern": "app/controllers/concerns/strategies_concern.rb", "CarePlanContactsController": "app/controllers/care_plan_contacts_controller.rb", "SharedBasicConcern": "app/controllers/concerns/shared_basic_concern.rb", "PageRedirectConcern": "app/controllers/concerns/page_redirect_concern.rb", "Groups::MembershipsController": "app/controllers/groups/memberships_controller.rb", "AllyNotifications::NewAllyRequest": "app/mailers/ally_notifications/new_ally_request.rb", "CarePlanContactsConcern": "app/controllers/concerns/care_plan_contacts_concern.rb", "AllyNotifications::AcceptedAllyRequest": "app/mailers/ally_notifications/accepted_ally_request.rb", "CollectionPageSetupConcern": "app/controllers/concerns/collection_page_setup_concern.rb", "Meetings::GoogleCalendarEventController": "app/controllers/meetings/google_calendar_event_controller.rb", "Logger": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/logger.rb", "Net::HTTP": "/home/travis/.rvm/rubies/ruby-2.6.6/lib/ruby/2.6.0/net/http.rb" }, "source_control": { "url": "https://github.com/land-of-apps/ifme.git", "commit": "4a4bdb7c7f1b8022be7cdc98d6fb9ce69621eb26" } };
</script>